[gd_scene load_steps=16 format=2]

[ext_resource path="res://Models/TestWaggon.png" type="Texture" id=1]
[ext_resource path="res://Scripts/Rotator.gd" type="Script" id=2]
[ext_resource path="res://Models/SM_Testcar_01.obj" type="ArrayMesh" id=3]
[ext_resource path="res://Pictures/IMG_20220526_172713.jpg" type="Texture" id=4]
[ext_resource path="res://Pictures/IMG_20220525_000520__01.jpg" type="Texture" id=5]
[ext_resource path="res://Scripts/testscript.gd" type="Script" id=6]
[ext_resource path="res://Scripts/testscript3.gd" type="Script" id=7]

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;

uniform float sizeX = 250.0;
uniform float sizeY = 250.0;


void fragment(){
	vec2 alignedUV = UV * vec2(sizeX, sizeY);
	alignedUV = floor(alignedUV);
	alignedUV /= vec2(sizeX, sizeY);
	COLOR = texture(TEXTURE, alignedUV); //read from texture
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/sizeX = 50.0
shader_param/sizeY = 50.0

[sub_resource type="GradientTexture" id=10]

[sub_resource type="SpatialMaterial" id=5]
flags_unshaded = true
params_cull_mode = 2
params_use_alpha_scissor = true
params_alpha_scissor_threshold = 0.98
albedo_texture = ExtResource( 1 )

[sub_resource type="PlaneMesh" id=6]

[sub_resource type="SpatialMaterial" id=7]
flags_unshaded = true
albedo_texture = ExtResource( 5 )

[sub_resource type="PlaneMesh" id=8]

[sub_resource type="SpatialMaterial" id=9]
flags_unshaded = true
albedo_texture = ExtResource( 4 )

[node name="TestRenderer" type="Spatial"]
script = ExtResource( 6 )

[node name="Viewport" type="Viewport" parent="."]
size = Vector2( 500, 500 )
size_override_stretch = true

[node name="Spatial" type="Spatial" parent="Viewport"]
script = ExtResource( 2 )
speed = Vector3( 0, 1, 0 )

[node name="Camera" type="Camera" parent="Viewport/Spatial"]
transform = Transform( 1, 0, 0, 0, 0.803649, 0.595103, 0, -0.595103, 0.803649, -0.199189, 5.22988, 7.07938 )
cull_mask = 1047552
projection = 1
fov = 46.9169
size = 4.67

[node name="Sprite" type="Sprite" parent="."]
visible = false
material = SubResource( 3 )
position = Vector2( 526, 178.25 )
scale = Vector2( 1, 262.5 )
texture = SubResource( 10 )
flip_v = true
script = ExtResource( 7 )

[node name="SM_Testcar_01" type="MeshInstance" parent="."]
layers = 1024
mesh = ExtResource( 3 )
material/0 = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.16827 )
visible = false
mesh = SubResource( 6 )
material/0 = SubResource( 7 )

[node name="MeshInstance2" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.825075 )
visible = false
mesh = SubResource( 8 )
material/0 = SubResource( 9 )
